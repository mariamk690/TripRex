@using Microsoft.AspNetCore.Identity
@inject SignInManager<IdentityUser> SignInManager
@inject UserManager<IdentityUser> UserManager

<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>@ViewData["Title"] - TripRex</title>

	<!-- Bootstrap -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
	<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet" />

	<style>
		/* === TRIPREX THEME COLORS === */
		body.bg-light {
			background-color: #e9f7ec !important;
			color: #1e4022;
		}

		.triprex-nav {
			background-color: #3cb043 !important;
			border-bottom: 3px solid #1e4022;
			padding-top: 0.25rem !important;
			padding-bottom: 0.25rem !important;
			min-height: 68px; 
			line-height: 1 !important;
		}

			.triprex-nav .navbar-brand {
				display: flex;
				align-items: center;
			}

		.logo-wrap {
			width: 110px; 
			height: 55px; 
			display: flex;
			align-items: center;
			justify-content: center;
			overflow: visible;
			margin-right: 75px; 
		}

		.logo-img {
			height: 225px; 
			width: auto;
		}

		.navbar-brand,
		.navbar-nav .nav-link,
		.navbar .btn {
			color: #fff !important;
		}

			.navbar-nav .nav-link:hover,
			.navbar-nav .nav-link.active {
				color: #e9f7ec !important;
			}

		/* BUTTONS */
		.btn-primary {
			background-color: #3cb043;
			border-color: #3cb043;
		}

			.btn-primary:hover {
				background-color: #2e8b39;
				border-color: #2e8b39;
			}

		.btn-outline-secondary {
			color: #1e4022;
			border-color: #1e4022;
		}

			.btn-outline-secondary:hover {
				background-color: #1e4022;
				color: #fff;
			}

		/* FOOTER */
		footer {
			background-color: #3cb043;
			color: #fff;
			border-top: 3px solid #1e4022;
		}

			footer a {
				color: #e9f7ec;
			}

				footer a:hover {
					color: #fff;
				}
	</style>

	@RenderSection("HeadContent", required: false)
</head>

<body class="bg-light">

	<!-- ===== NAVBAR ===== -->
	<nav class="navbar navbar-expand-lg triprex-nav border-bottom">
		<div class="container">

			<!-- LOGO -->
			<a class="navbar-brand d-flex align-items-center fw-semibold"
			   asp-controller="Dashboard" asp-action="Index">
				<div class="logo-wrap">
					<img src="~/images/TripRex_Tiny.png" alt="TripRex Logo" class="logo-img" />
				</div>
			</a>

			<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#topnav">
				<span class="navbar-toggler-icon"></span>
			</button>

			<div id="topnav" class="collapse navbar-collapse">

				<!-- LEFT NAV -->
				<ul class="navbar-nav me-auto mb-2 mb-lg-0">
					<li class="nav-item"><a class="nav-link" asp-controller="CurrentPackage" asp-action="Index">Current Package</a></li>
					<li class="nav-item"><a class="nav-link" asp-controller="Checkout" asp-action="Index">Checkout</a></li>
					<li class="nav-item"><a class="nav-link" asp-controller="AccountInfo" asp-action="Index">Account</a></li>
				</ul>

				<!-- RIGHT SIDE -->
				<div class="d-flex align-items-center">

					@if (!SignInManager.IsSignedIn(User))
					{
						<!-- GUEST -->
						<a class="btn btn-outline-secondary me-2"
						   asp-controller="Account" asp-action="Login">Sign In</a>

						<a class="btn btn-primary"
						   asp-controller="Account" asp-action="Register">Register</a>
					}
					else
					{
						<!-- LOGGED-IN DROPDOWN -->
						<div class="dropdown">
							<a class="btn btn-outline-secondary dropdown-toggle" data-bs-toggle="dropdown">
								@User.Identity!.Name
							</a>

							<ul class="dropdown-menu dropdown-menu-end">
								<li><a class="dropdown-item" asp-controller="AccountInfo" asp-action="Index">Profile</a></li>
								<li><hr class="dropdown-divider" /></li>
								<li>
									<form asp-controller="Account" asp-action="Logout" method="post">
										<button type="submit" class="dropdown-item text-danger">Sign out</button>
									</form>
								</li>
							</ul>
						</div>
					}

				</div>
			</div>
		</div>
	</nav>

	<!-- ===== MAIN CONTENT ===== -->
	<main class="container py-4">
		@RenderBody()
	</main>

	<!-- ===== FOOTER ===== -->
	<footer class="py-4 border-top">
		<div class="container d-flex justify-content-between small">
			<span>© Mariam Khan — TripRex</span>
		</div>
	</footer>

	<!-- Bootstrap JS -->
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

	@RenderSection("Scripts", required: false)
</body>
</html>
